require 'rubygems'
require 'albacore'

desc "Build the solution"
msbuild do |msb|
	msb.solution = "ionfish.sln"
end

desc "Runs specs"
mspec do |mspec|
	mspec.command = "lib/machine.specifications/net40/mspec.exe"
	mspec.assemblies Dir["bin/*.Specs.dll"]
	mspec.html_output = "./specs.html"
end

desc "Build the solution and run the specs"
task :default => [:msbuild, :mspec]

desc "Installs all dependencies using nu"
task :nu do
	instance_eval(File.read("Gemfile"))
end

def gem(name, version)
	sh "nu install #{name} --version #{version}"
end
